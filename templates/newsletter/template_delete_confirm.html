{% extends "base.html" %}
{% load static %}

{% block title %}Delete Template | XManager{% endblock %}

{% block page_title %}Delete Newsletter Template{% endblock %}

{% block content %}
    <div class="card">
        <div class="card-body">
            <div class="alert alert-danger">
                <i class="fas fa-exclamation-triangle me-2"></i> 
                <strong>Warning:</strong> You are about to delete the template "{{ newslettertemplate.name }}". This action cannot be undone.
            </div>
            
            <div class="mb-4">
                <h5>Template Details</h5>
                <div class="table-responsive">
                    <table class="table table-bordered">
                        <tbody>
                            <tr>
                                <th style="width: 150px;">Name</th>
                                <td>{{ newslettertemplate.name }}</td>
                            </tr>
                            <tr>
                                <th>Description</th>
                                <td>{{ newslettertemplate.description|default:"No description" }}</td>
                            </tr>
                            <tr>
                                <th>Created at</th>
                                <td>{{ newslettertemplate.created_at|date:"d M Y H:i" }}</td>
                            </tr>
                            <tr>
                                <th>Usage</th>
                                <td>
                                    {% if newslettertemplate.newsletters.exists %}
                                        <span class="text-danger">
                                            <strong>Used by {{ newslettertemplate.newsletters.count }} newsletter(s)</strong>
                                        </span>
                                        <div class="mt-2">
                                            <ul>
                                                {% for newsletter in newslettertemplate.newsletters.all|slice:":5" %}
                                                    <li>{{ newsletter.subject }}</li>
                                                {% endfor %}
                                                {% if newslettertemplate.newsletters.count > 5 %}